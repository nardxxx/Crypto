document.addEventListener("DOMContentLoaded",e=>{document.querySelector(".wrapper").classList.add("loaded"),document.querySelector(".icon-menu").addEventListener("click",e=>{e.target.closest(".icon-menu").classList.toggle("active"),document.querySelector(".header__body").classList.toggle("active"),document.querySelector("body").classList.toggle("lock")}),$(".mobile-menu li").on("click",()=>{$(".icon-menu").removeClass("active"),$(".header__body").removeClass("active"),$("body").removeClass("lock")}),sliderWithIsotope(),initSliders(),window.addEventListener("load",(function(){swiperMode()})),window.addEventListener("resize",(function(){swiperMode()})),modalActions(),linkTo(),$("#phone").inputmask({mask:"+7(999) 999-9999"})});const arrow=document.querySelector(".goTop");function sliderWithIsotope(){let e=window.matchMedia("(min-width: 0px) and (max-width: 768px)"),t=window.matchMedia("(min-width: 769px) and (max-width: 1024px)"),r=window.matchMedia("(min-width: 1025px)"),i=$(".best .best__row .swiper-slide:not(.swiper-slide-duplicate)").length,s=!0,o=4;function l(){i=$(".best .best__row .swiper-slide:not(.swiper-slide-duplicate)").length,e.matches&&(s=!1,o=1,$(".best .best__row .swiper-slide-duplicate").remove()),t.matches&&(o=2,s=!0,i<=2&&(s=!1,$(".best .best__row .swiper-slide-duplicate").remove())),r.matches&&(o=4,s=!0,i<=4&&(s=!1,$(".best .best__row .swiper-slide-duplicate").remove()))}l();let a=new Swiper(".best .best__row",{direction:"horizontal",loop:s,navigation:{nextEl:".best .arrR",prevEl:".best  .arrL"},preventClicks:!1,preventClicksPropagation:!1,spaceBetween:30,autoHeight:!0,breakpoints:{320:{slidesPerView:o,spaceBetween:50,allowTouchMove:!0},769:{slidesPerView:o,allowTouchMove:!1},1201:{slidesPerView:o,allowTouchMove:!1}},on:{init:function(){$(".best .youtube-link").grtyoutube()}}});window.addEventListener("resize",e=>{a.destroy(),l(),a=new Swiper(".best .best__row",{direction:"horizontal",allowTouchMove:!1,loop:s,navigation:{nextEl:".best .arrR",prevEl:".best  .arrL"},spaceBetween:30,autoHeight:!0,breakpoints:{320:{slidesPerView:o,spaceBetween:50},769:{slidesPerView:o},1201:{slidesPerView:o}}}),$(".best .swiper-slide-duplicate .youtube-link").grtyoutube()});$(".best__filter button").on("click",(function(){let e=$(this).data("filter-name").toLowerCase();$(".best__filter button"),$(".best__filter button").removeClass("active"),$(this).addClass("active"),"all"==e?(i=document.querySelectorAll(".best .best__row .item:not(.swiper-slide-duplicate)").length,$(".best [data-filter]").removeClass("non-swiper-slide").addClass(".best swiper-slide").show(),l(),a.destroy(),a=new Swiper(".best .best__row",{direction:"horizontal",loop:s,navigation:{nextEl:".best .arrR",prevEl:".best  .arrL"},preventClicks:!1,preventClicksPropagation:!1,spaceBetween:30,autoHeight:!0,breakpoints:{320:{slidesPerView:o,spaceBetween:50,allowTouchMove:!0},769:{slidesPerView:o,allowTouchMove:!1},1201:{slidesPerView:o,allowTouchMove:!1}}}),$(".best .swiper-slide-duplicate .youtube-link").grtyoutube()):($(".best .swiper-slide").not("[data-filter='"+e+"']").addClass("non-swiper-slide").removeClass("swiper-slide").hide(10),$(".best .swiper-slide-duplicate.non-swiper-slide").remove(),$("[data-filter='"+e+"']").removeClass("non-swiper-slide").addClass("swiper-slide").attr("style",null).show(),l(),a.destroy(),a=new Swiper(".best .best__row",{direction:"horizontal",loop:s,navigation:{nextEl:".best .arrR",prevEl:".best  .arrL"},preventClicks:!1,preventClicksPropagation:!1,spaceBetween:30,autoHeight:!0,breakpoints:{320:{slidesPerView:o,spaceBetween:50,allowTouchMove:!0},769:{slidesPerView:o,allowTouchMove:!1},1201:{slidesPerView:o,allowTouchMove:!1}}}),$(".best .swiper-slide-duplicate .youtube-link").grtyoutube())}))}function initSliders(){swiperMerch=new Swiper(".merch .merch__slider",{direction:"horizontal",loop:!0,navigation:{nextEl:".merch .arrR",prevEl:".merch  .arrL"},spaceBetween:28,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1200:{slidesPerView:4}}}),swiperTraining=new Swiper(".tutors .tutors__slider",{loop:!0,direction:"horizontal",navigation:{nextEl:".tutors .arrR",prevEl:".tutors .arrL"},breakpoints:{1200:{slidesPerView:3,spaceBetween:182}}});new Swiper(".spec-offer__row",{direction:"horizontal",navigation:{nextEl:".spec-offer  .arrR",prevEl:".spec-offer  .arrL"},spaceBetween:10,breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},769:{slidesPerGroup:2,slidesPerView:2,spaceBetween:30}}}),new Swiper(".events .events__carusel",{direction:"horizontal",loop:!0,spaceBetween:28,navigation:{nextEl:".events .arrR",prevEl:".events  .arrL"},breakpoints:{320:{slidesPerView:1},769:{slidesPerView:2},1201:{slidesPerView:4}}});document.querySelectorAll(".vr-go__sliders .slider").forEach((e,t)=>{let r=`.vr-go__sliders .slider:nth-last-child(${t+=1})`;new Swiper(""+(r+" .slider__carusel"),{direction:"horizontal",loop:!0,effect:"creative",creativeEffect:{prev:{opacity:0,translate:["-20%",0,-1]},next:{translate:["100%",0,0]}},navigation:{nextEl:r+" .arrR",prevEl:r+" .arrL"},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},768:{slidesPerView:2,slidesPerGroup:2}}})})}document.addEventListener("scroll",e=>{document.documentElement.scrollTop>1500?arrow.matches(".active")||arrow.classList.add("active"):arrow.matches(".active")&&arrow.classList.remove("active")}),$(".goTop__inner").click((function(){return $("html, body").animate({scrollTop:0},"slow"),!1}));let swiperSubscribe="",swiperHeadsets="",swiperRules="",init=!1;function swiperMode(){let e=window.matchMedia("(min-width: 0px) and (max-width: 768px)"),t=window.matchMedia("(min-width: 769px) and (max-width: 1024px)"),r=window.matchMedia("(min-width: 1025px)");if(e.matches){if(!init){init=!0,$(".power-vr-man-items .dot").each((function(e,t){tippy(`.power-vr-man-items .item:nth-child(${e+1}) .dot`,{content:$(t).siblings(".text").text(),arrow:!1})})),document.querySelectorAll(".merch__slider, .subscribe__gallery, .rules__slider, .headsets__slider").forEach(e=>e.classList.add("swiper")),document.querySelectorAll(".merch__row, .subscribe__gallery .row, .rules__row, .headsets__row").forEach(e=>e.classList.add("swiper-wrapper")),document.querySelectorAll(".merch .merch__item, .subscribe__gallery .row .item, .rules__row .item, .headsets__item").forEach(e=>e.classList.add("swiper-slide")),swiperHeadsets=new Swiper(".headsets .headsets__slider",{direction:"horizontal",navigation:{nextEl:".headsets .arrR",prevEl:".headsets .arrL"},breakpoints:{320:{slidesPerView:1,spaceBetween:40}}}),swiperRules=new Swiper(".rules .rules__slider",{direction:"horizontal",navigation:{nextEl:".rules .arrR",prevEl:".rules .arrL"},breakpoints:{320:{slidesPerView:1,spaceBetween:40}}}),swiperSubscribe=new Swiper(".subscribe .subscribe__gallery",{direction:"horizontal",navigation:{nextEl:".subscribe .arrR",prevEl:".subscribe .arrL"},breakpoints:{320:{slidesPerView:1,spaceBetween:10}}})}}else(t.matches||r.matches)&&(swiperSubscribe||swiperHeadsets||swiperRules)&&(swiperSubscribe.destroy(),swiperHeadsets.destroy(),swiperRules.destroy(),document.querySelectorAll(".subscribe__gallery, .rules__slider, .headsets__slider").forEach(e=>e.classList.remove("swiper")),document.querySelectorAll(" .subscribe__gallery .row, .rules__row, .headsets__row").forEach(e=>e.classList.remove("swiper-wrapper")),document.querySelectorAll(".subscribe__gallery .row .item, .rules__row .item, .headsets__item").forEach(e=>e.classList.remove("swiper-slide")),init=!1)}function linkTo(){document.querySelectorAll("[data-href]").forEach(e=>e.addEventListener("click",e=>{window.location.href=""+e.currentTarget.getAttribute("data-href")}))}function structureModal(e){return{img:e.querySelector("img"),date:e.querySelector(".date"),title:e.querySelector(".title"),subtitle:e.querySelector(".subtitle"),detailtitle:e.querySelector(".detailtitle")}}function modalActions(){const e=document.querySelector(".modal"),t=e.querySelector(".modal__inner");document.querySelectorAll("[data-modal]").forEach(r=>r.addEventListener("click",r=>{if(e.classList.add("active"),document.body.classList.add("lock"),"event"==r.currentTarget.getAttribute("data-modal")){t.classList.add("modal__inner_events");const{img:i,date:s,title:o,subtitle:l,detailtitle:a}=structureModal(r.currentTarget);e.querySelector(".div img").src=i.src,e.querySelector(".div .date").textContent=s.textContent,e.querySelector(".div h3").textContent=o.textContent,e.querySelector(".div p").textContent=a.textContent;const n=document.querySelector(".modal p");n.innerHTML=n.innerHTML.replace(/(?:\r\n|\r|\n)/g,"<br>")}else{let i=$(r.currentTarget).attr("data-title");void 0!==i?i.length>0&&(e.querySelector(".modal__title").textContent=i,$(e.querySelector(".modal__input_title")).val(i)):(e.querySelector(".modal__title").textContent="Оставьте Заявку",$(e.querySelector(".modal__input_title")).val("Оставьте Заявку")),t.classList.remove("modal__inner_events")}})),document.querySelector("[data-close]").addEventListener("click",t=>{document.body.classList.remove("lock"),e.classList.remove("active")})}function replaceTextInMobileMenu(){let e=window.matchMedia("(min-width: 0px) and (max-width: 768px)");window.matchMedia("(min-width: 769px) and (max-width: 1024px)"),window.matchMedia("(min-width: 1025px)");if(e.matches){const e=[];$(".header__menu p").each((function(){e.push($(this).text()),$(this.remove())})),$(".header__menu li").eq(1).text(`${e[0]} ${e[1]}`),$(".header__menu li").eq(2).text(`${e[2].toLowerCase()} ${e[3].toLowerCase()}`)}}replaceTextInMobileMenu(),$(".youtube-link").grtyoutube(),$((function(){$(".vr-go__sliders .slider__inner  img").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},gallery:{enabled:!0},callbacks:{elementParse:function(e){e.src=e.el.attr("src")}},zoom:{enabled:!0,duration:300}})}));